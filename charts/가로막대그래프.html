<html>
    <head>
        <meta charset="'UTF-8"/>
        <title>가로막대 그래프</title>
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <style>
            svg {width: 320px; height: 240; border:1px solid black;}
            #myGraph rect {
                stroke : rgb(160, 0, 0);
                stroke-width : 1px;
                fill : rgb(255,0,0);
            }
        </style>
    </head>
    <body>
        <h1>가로 막대 그래프</h1>
        
        <button id="updateButton">데이터 업데이트</button>
        <br>
        <br>
        <svg id="myGraph"></svg>

        <!-- <script src="js/sample.js"></script> -->
        
        <script>
            var dataSet = [300,130,5,60,240];
            
            var cnt = 0;
            d3.select("#updateButton")
            .on("click", function() { // 버튼을 클릭하면 아래 조건문으로 값이 다르게 들어가면서 svg객체가 다르게 그려진다.
                for(var i = 0; i < dataSet.length; i++){
                    dataSet[i] = Math.floor(Math.random()*320);
                }

                d3.select("#myGraph")
                .selectAll("rect")
                .data(dataSet)
                .transition()
                .attr("width", function(d, i) {
                    return d+"px";
                })
                cnt += 1;
            })

            d3.select("#myGraph")
            .selectAll("rect")
            .data(dataSet)
            .enter()
            .append("rect")
            .attr("x", 0)
            .attr("y", function(d, i) {
                return i*25;
            })
            .attr("width", function(d, i) {
                return d+"px";
            })
            .attr("height", "20px")
            // .on("click", function() {
                
            //     if(cnt%2 == 0){
            //         dataSet = [20, 230, 150, 10, 20];    
            //     }
            //     else{
            //         dataSet = [300,130,5,60,240];    
            //     }
            //     d3.select("#myGraph")
            //     .selectAll("rect")
            //     .data(dataSet)
            //     .attr("width", function(d, i) {
            //         return d+"px";
            //     })
            //     cnt += 1;
            // })

        </script>

        <br>
        <br>
        <h2>밑에껀 그냥 svg로 그려본 사각형</h2>
        <svg id="rect">
            <rect x="10", y="30" width="100" height="80" />
        </svg><!--여기에도 사각형 선이 그려지는데 왜 그럴까?-->
    </body>
</html>
